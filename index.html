<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rewards-search</title>
    <link rel="icon" href="./pkg/favicon.ico" type="image/x-icon">
    <style>
        body {
            font-size: 12px; /* bodyã‚¿ã‚°ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’æŒ‡å®š */
        }
        h1 {
            font-size: 32px; /* h1ã‚¿ã‚°ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’æŒ‡å®š */
        }
        h2 {
            font-size: 16px; /* h2ã‚¿ã‚°ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’æŒ‡å®š */
            margin-bottom: 0px; /* h2ã‚¿ã‚°ã®ä¸‹å´ã®ãƒãƒ¼ã‚¸ãƒ³ã‚’æŒ‡å®š */
            color: #0011ff; /* h2ã‚¿ã‚°ã®æ–‡å­—è‰²ã‚’é’ã«æŒ‡å®š */
        }
        p {
            font-size: 14px; /* pã‚¿ã‚°ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’æŒ‡å®š */
        }
        /* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .search-container {
            position: fixed;
            top: 80px;
            left: 20px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            transition: all 0.3s ease-in-out;
            width: 150px; /* åˆæœŸã‚µã‚¤ã‚ºã‚’å°ã•ã */
            overflow: hidden;
        }

        .search-container.active {
            width: 250px; /* åºƒãŒã‚‹ */
        }   

        .search-input {
            border: none;
            outline: none;
            padding: 8px;
            width: 200px;
            font-size: 16px;
            transition: opacity 0.3s ease-in-out;
        }

        .search-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
        }

        .search-container.active .search-input {
            opacity: 1;
        }
        .spacer {
            height: 50px; /* é«˜ã•ã‚’èª¿æ•´ */
        }
        .h2-list {
    padding: 10px;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    position: fixed; /* å›ºå®šä½ç½® */
    top: 20px; /* ä¸Šã‹ã‚‰20px */
    right: 20px; /* å³ã‹ã‚‰20px */
    width: 200px; /* å¹…ã‚’æŒ‡å®š */
    background-color: white; /* èƒŒæ™¯è‰² */
    z-index: 1000; /* ä»–ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚ˆã‚Šå‰ã«è¡¨ç¤º */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* å°‘ã—å½±ã‚’ã¤ã‘ã‚‹ */
}

.h2-item {
    cursor: pointer;
    padding: 5px;
    border-bottom: 1px solid #ddd;
}

.h2-item:hover {
    background-color: #f0f0f0;
}

    </style>
</head>
<body>
    <h1>Rewards Search Keyword</h1>
    <div id="h2-list" class="h2-list"></div> <!-- ã“ã“ã« h2 ã‚¿ã‚°ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º -->

    

    <script type="module">
        import init from './pkg/hello_wasm.js';

        async function run() {
            await init();
            //displayH2List(); // h2ã‚¿ã‚°ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º
            setTimeout(displayH2List, 100); // `<h2>` ã‚’ãƒªã‚¹ãƒˆåŒ– (å°‘ã—é…å»¶ã—ã¦å®Ÿè¡Œ)
        }
        run();

        function displayH2List() {
            const h2Elements = document.querySelectorAll("h2");
            const listContainer = document.getElementById("h2-list");
            listContainer.innerHTML = "<h3>ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é¸æŠ:</h3>";

            h2Elements.forEach(h2 => {
                let listItem = document.createElement("div");
                listItem.textContent = h2.textContent;
                listItem.classList.add("h2-item");
                listItem.onclick = () => searchH2(h2.textContent);
                listContainer.appendChild(listItem);
            });
        }

        function extractBetween(text) {
            const match = text.match(/ã€(.*?)ã€ã‹ã‚‰ã€(.*?)ã€ã¾ã§/);
            if (match) {
                return match[0]; // ã€ã‹ã‚‰ã€ã¾ã§ã®éƒ¨åˆ†ã‚’ãã®ã¾ã¾å–å¾—
            }
            return null;
        }

        
        function searchH2(keyword) {
            let found = false;
            document.querySelectorAll("h2").forEach(h2 => {
                if (h2.textContent === keyword) {
                    h2.classList.add("highlight");
                    h2.scrollIntoView({ behavior: "smooth", block: "center" });
                    found = true;
                } else {
                    h2.classList.remove("highlight");
                }
            });

            showMessage(found ? `ğŸ” ã€Œ${keyword}ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼` : `âŒ ã€Œ${keyword}ã€ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚`, found ? "success" : "error");
        }

        function showMessage(msg, type) {
            let messageBox = document.getElementById("searchMessage");
            if (!messageBox) {
                messageBox = document.createElement("div");
                messageBox.id = "searchMessage";
                messageBox.style.position = "fixed";
                messageBox.style.bottom = "60px";
                messageBox.style.right = "20px";
                messageBox.style.padding = "10px";
                messageBox.style.borderRadius = "5px";
                messageBox.style.color = "white";
                messageBox.style.fontSize = "14px";
                messageBox.style.zIndex = "1000";
                document.body.appendChild(messageBox);
            }

            messageBox.style.backgroundColor = type === "success" ? "#28a745" : "#dc3545";
            messageBox.textContent = msg;
            messageBox.style.display = "block";

            setTimeout(() => {
                messageBox.style.display = "none";
            }, 3000);
        }
    </script>

    <style>
        .h2-list {
            padding: 10px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .h2-item {
            cursor: pointer;
            padding: 5px;
            border-bottom: 1px solid #ddd;
        }

        .h2-item:hover {
            background-color: #f0f0f0;
        }

        .highlight {
            background-color: yellow;
        }
    </style>
</body>
</html>
